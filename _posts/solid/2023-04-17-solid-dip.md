---
title: "[κ°μ²΄μ§€ν–¥] SOLID: μμ΅΄ μ—­μ „ μ›μΉ™(Dependency Inversion Principle, DIP)"
categories: [κ°μ²΄μ§€ν–¥]
tag: ["κ°μ²΄μ§€ν–¥"]
toc: true
toc_sticky: true
author_profile: false
sidebar:
    nav: "counts"
---

>  **Reference**
>
>  μ¤ν”„λ§ μ…λ¬Έμ„ μ„ν• μλ°” κ°μ²΄ μ§€ν–¥μ μ›λ¦¬μ™€ μ΄ν•΄, μ„ν‚¤λ¶μ¤, κΉ€μΆ…λ―Ό μ§€μ
>
>  κ°λ°μκ°€ λ°λ“μ‹ μ •λ³µν•΄μ•Ό ν•  κ°μ²΄ μ§€ν–¥κ³Ό λ””μμΈ ν¨ν„΄, μΈν¬λ¶μ¤, μµλ²”κ·  μ§€μ

<br>

# π“ Whatβ€™s DIP?

> ***β€μ¶”μƒν™”μ— μμ΅΄ν•΄μ•Όμ§€ κµ¬μ²΄ν™”μ— μμ΅΄ν•λ©΄ μ•λλ‹¤.β€***
>
> ***β€κ³ μμ¤€ λ¨λ“μ€ μ €μμ¤€ λ¨λ“μ κµ¬ν„μ— μμ΅΄ν•΄μ„λ” μ• λλ‹¤. μ €μμ¤€ λ¨λ“μ΄ κ³ μμ¤€ λ¨λ“μ—μ„ μ •μν• μ¶”μƒ νƒ€μ…μ— μμ΅΄ν•΄μ•Ό ν•λ‹¤.β€***
>
> ***β€μμ£Ό λ³€κ²½λλ” κµ¬μ²΄(Concrete) ν΄λμ¤μ— μμ΅΄ν•μ§€ λ§λΌ.β€***

- **μμ΅΄ μ—­μ „ μ›μΉ™**: μμ‹ λ³΄λ‹¤ λ³€ν•κΈ° μ‰¬μ΄ κ²ƒμ— μμ΅΄ν•λ κ²ƒμ„ μ¶”μƒν™”λ μΈν„°νμ΄μ¤λ‚ μƒμ„ ν΄λμ¤λ¥Ό λ‘μ–΄ λ³€ν™”ν•κΈ° μ‰¬μ΄ κ²ƒμ λ³€ν™”μ— μν–¥λ°›μ§€ μ•κ² ν•λ” μ›μΉ™
  - κ³ μμ¤€ λ¨λ“: μ–΄λ–¤ μλ―Έ μλ” λ‹¨μΌ κΈ°λ¥μ„ μ κ³µν•λ” λ¨λ“(μΈν„°νμ΄μ¤λ‚ μƒμ„ ν΄λμ¤)
  - μ €μμ¤€ λ¨λ“: κ³ μμ¤€ λ¨λ“μ κΈ°λ¥μ„ κµ¬ν„ν•κΈ° μ„ν•΄ ν•„μ”ν• ν•μ„ κΈ°λ¥μ μ‹¤μ  κµ¬ν„(κµ¬ν„μ²΄λ‚ ν•μ„ ν΄λμ¤)
- **μμ‹ λ³΄λ‹¤ λ³€ν•κΈ° μ‰¬μ΄ κ²ƒμ— μμ΅΄ν•μ§€ λ§λΌ!!!**

## κ³ μμ¤€ & μ €μμ¤€ λ¨λ“ μμ : μ•”νΈν™”

- κ³ μμ¤€ λ¨λ“: μλ―Έμλ” λ‹¨μΌ κΈ°λ¥
  - λ°”μ΄νΈ λ°μ΄ν„°λ¥Ό μ½μ–΄μ™€ μ•”νΈν™” ν•κ³  κ²°κ³Ό λ°”μ΄νΈ λ°μ΄ν„°λ¥Ό μ“΄λ‹¤.
  - μλ―Έ μλ” λ‹¨μΌ κΈ°λ¥: λ°”μ΄νΈ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ‹¤.
  - ν•„μ”ν• ν•μ„ κΈ°λ¥: λ°μ΄ν„° μ½κΈ°, μ•”νΈν™”, λ°μ΄ν„° μ“°κΈ°
- μ €μμ¤€ λ¨λ“: κ³ μμ¤€ λ¨λ“μ—μ„ ν•„μ”ν• ν•μ„ κΈ°λ¥μ„ μ‹¤μ λ΅ κµ¬ν„
  - λ°μ΄ν„° μ½κΈ°: νμΌμ—μ„ λ°”μ΄νΈ λ°μ΄ν„°λ¥Ό μ½μ–΄μ¨λ‹¤.
  - μ•”νΈν™”: AES μ•κ³ λ¦¬μ¦μ„ μ΄μ©ν•΄ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ‹¤.
  - λ°μ΄ν„° μ“°κΈ°: νμΌμ— λ°”μ΄νΈ λ°μ΄ν„°λ¥Ό μ“΄λ‹¤.

<br>

# π“ κ³ μμ¤€ λ¨λ“μ΄ μ €μμ¤€ λ¨λ“μ— μμ΅΄ν•  λ•μ λ¬Έμ 

κ³ μμ¤€ λ¨λ“μ€ μƒλ€μ μΌλ΅ ν° ν‹€(μƒμ„ λ¬Έμ )μ—μ„ ν”„λ΅κ·Έλ¨μ„ λ‹¤λ£¨κ³ , μ €μμ¤€ λ¨λ“μ€ κ° κ°λ³„ μ”μ†(μƒμ„Έ λ¬Έμ )κ°€ μ–΄λ–»κ² κµ¬ν„λ μ§€μ— λ€ν•΄μ„ λ‹¤λ£¬λ‹¤.

ν”„λ΅μ νΈκ°€ μ•μ •κΈ°μ— μ ‘μ–΄λ“¤λ©΄ μƒμ„ λ¬Έμ λ¥Ό λ³€κ²½ν•κΈ° λ³΄λ‹¤λ” μƒμ„Έν• λ¬Έμ λ¥Ό λ³€κ²½ν•  κ°€λ¥μ„±μ΄ λ†’μ•„μ§„λ‹¤. μ΄λ• κ³ μμ¥° λ¨λ“μ΄ μ €μμ¤€ λ¨λ“μ— μμ΅΄ν•λ©΄ λ³€κ²½μ΄ μ–΄λ ¤μ›μ§„λ‹¤.

## ν• μΈ μ •μ±…μ λ³€κ²½

μƒν’μ κ°€κ²©μ„ κ²°μ •ν•λ” μ •μ±…μ„ μƒκ°ν•΄ λ³΄λ©΄ μƒμ„ μμ¤€μ—μ„ μ–΄λ–»κ² ν• μΈ μ •μ±…μ„ μ μ©ν• μ§€ ν° ν‹€μ„ μ΅μ•„ κ²°μ •μ„ λ‚΄λ¦°λ‹¤.

- μΏ ν°μ„ μ μ©ν•΄μ„ κ°€κ²© ν• μΈμ„ ν•΄ μ¤€λ‹¤.
- μΏ ν°μ€ μƒν’λ‹Ή ν• κ°λ§ μ‚¬μ©ν•  μ μλ‹¤.

μ„ λ‚΄μ©μ€ κ³ μμ¤€ λ¨λ“μ μ •μ±…μ΄λ‹¤. κ³ μμ¤€ λ¨λ“μ μλ―Έ μλ” λ‹¨μΌ κΈ°λ¥μ€ μΏ ν°μ„ μ μ©ν•΄ ν• μΈμ„ ν•΄μ£Όλ” κ²ƒμ΄λ‹¤. μ΄ κΈ°λ¥μ„ κµ¬ν„ν•κΈ° μ„ν•΄ ν•„μ”ν• ν•μ„ κΈ°λ¥μ€ κ³ μ • ν• μΈ μΏ ν°μ„ μ‚¬μ©ν• μ§€, μ •λ¥  ν• μΈ μΏ ν°μ„ μ‚¬μ©ν• μ§€, μ‚¬μ©μμ λ“±κΈ‰μ— λ”°λΌ μ–΄λ–¤ μ •λ¥ μ„ μ μ©ν• μ§€ λ“±μ΄ μ΅΄μ¬ν•λ‹¤.

μΏ ν°μ„ μ μ©ν•΄ ν• μΈμ„ ν•΄μ£Όλ” μ •μ±…μ€ ν¬κ² λ³€κ²½λ  μΌμ΄ μ—†μ§€λ§, μ„Έλ¶€μ μΈ ν• μΈ λ°©λ²•μ€ μƒν™©μ— λ”°λΌ λ³€κ²½μ΄ λ  μ μλ‹¤. λ§μ•½ κ³ μ • ν• μΈ μΏ ν°μ„ μ‚¬μ©ν•λ‹¤κ°€ μ‚¬μ©μ λ“±κΈ‰μ— λ”°λΌ μ •λ¥  ν• μΈ μΏ ν°μ„ μ κ³µν•λ‹¤λ©΄ μ–΄λ–»κ² λ κΉ?

- μ²μ μ •μ±…μ€ κ³ μ • ν• μΈ μΏ ν°μ„ μ‚¬μ©ν•λ‹¤.

```java
public int calculate(Item item) {

	int fixedDiscountAmount = 1000;

	return item.getPrice() - fixedDiscountAmount;
}
```

- μ—¬κΈ°μ—μ„ μ‚¬μ©μ λ“±κΈ‰μ΄ VIP μ΄μƒμ΄λ©΄ 10% ν• μΈ μΏ ν°μ„ μ‚¬μ©ν•  μ μλ„λ΅ λ³€κ²½ν•λ‹¤λ©΄β€¦

```java
public int calculate(Item item, Member member) {

	int rateDiscountAmount;
	int fixedDiscountAmount = 1000;

	if (member.getGrade.equals("VIP") {
		rateDiscountAmount = item.getPrice * 0.1;
		return item.getPrice() - Math.max(fixedDiscountAmount, rateDiscountAmount);
	}

	return item.getPrice() - fixedDiscountAmount;
}
```

μΏ ν°μ„ μ΄μ©ν• κ°€κ²© κ³„μ‚° λ¨λ“μ΄ **κ°λ³„μ μΈ μΏ ν° κµ¬ν„μ— μμ΅΄ν•κ² λλ©΄ μƒλ΅μ΄ μΏ ν° κµ¬ν„μ΄ μ¶”κ°€λκ±°λ‚ λ³€κ²½λ  λ•λ§λ‹¤ μ½”λ“κ°€ λ³€κ²½**λλ” μƒν™©μ΄ λ°μƒν•λ‹¤.

- μ΄λ° μƒν™©μ€ ν”„λ΅κ·Έλ¨μ λ³€κ²½μ„ μ–΄λ µκ² λ§λ“ λ‹¤. **μ €μμ¤€ λ¨λ“μ΄ λ³€κ²½λλ”λΌλ„ κ³ μμ¤€ λ¨λ“μ€ λ³€κ²½λμ§€ μ•λ„λ΅ μ§€μ›ν•λ” κ²ƒμ΄ μμ΅΄ μ—­μ „ μ›μΉ™(DIP)**μ΄λ‹¤.

<br>

# π“ DIP: μ μ—°ν•¨ ν™•λ³΄

- DIPλ” **μ €μμ¤€ λ¨λ“μ΄ κ³ μμ¤€ λ¨λ“μ— μμ΅΄**ν•κ² λ§λ“¤μ–΄μ„ λ³€κ²½μ‹ λ°μƒν•λ” λ¬Έμ λ¥Ό ν•΄κ²°ν•λ‹¤.

κ³ μμ¤€ λ¨λ“μ΄ μ €μμ¤€ λ¨λ“μ„ μ‚¬μ©ν•λ” κ²ƒμ€ κ³ μμ¤€ λ¨λ“μ΄ μ €μμ¤€ λ¨λ“μ— μμ΅΄ν•λ‹¤λ” λ»μΈλ°, μ–΄λ–»κ² μ €μμ¤€ λ¨λ“μ΄ κ³ μμ¤€ λ¨λ“μ„ μμ΅΄ν•κ² λ§λ“¤ μ μμ„κΉ? λ‹µμ€ **μ¶”μƒν™”**μ— μλ‹¤.

```java
public interface DiscountPolicy {

	/**
	 *
	 * @param member, νμ›
	 * @param price, μƒν’ κ°€κ²©
	 * @return ν• μΈ λ€μƒ κΈμ•΅
	 */
	int calculate(Member member, Item item);

}

public class FixDiscountPolicy implements DiscountPolicy {

	private int fixedDiscountAmount = 1000;

	@Override
	public int calculate(Member member, Item item) {				
		return item.getPrice() - fixedDiscountAmount;
	}

}

public class RateDiscountPolicy implements DiscountPolicy {

	private int discountPercent = 10;
	private int fixedDiscountAmount = 1000;

	@Override
	public int calculate(Member member, Item item) {
		if (member.getGrade().equals("VIP")) {
			return item.getPrice() - Math.max(item.getPrice() * discountPercent / 100, fixedDiscountAmount);
		} else {
			return 0;
		}
	}

}
```

μ‹¤μ  ν• μΈ μ •μ±…μ„ κ°€μ Έλ‹¤ μ“°λ” ν΄λΌμ΄μ–ΈνΈμ—μ„λ” μ„Έλ¶€μ μΌλ΅ κ³ μ • ν• μΈ μ •μ±…μ„ μ‚¬μ©ν• μ§€, μ •λ¥  ν• μΈ μ •μ±…μ„ μ‚¬μ©ν• μ§€ λ°λΌλ„ ν• μΈ μ •μ±…μ„ μ κ³µν•λ‹¤λ” ν° ν‹€λ§ μ•μ•„λ„ λλ‹¤. μ΄λ” μ €μμ¤€ λ¨λ“(κµ¬ν„μ²΄)μ΄ κ³ μμ¤€ λ¨λ“(μΈν„°νμ΄μ¤)μ— μμ΅΄ν•κΈ° λ•λ¬Έμ— λ°μƒν•  μ μλ” μΌμ΄λ‹¤.

μ΄λ• μƒλ΅μ΄ ν• μΈ μ •μ±…μ΄ μ¶”κ°€λλ”λΌλ„ **κ³ μμ¤€ λ¨λ“μ λ³€κ²½ μ—†μ΄ μ €μμ¤€ λ¨λ“λ§ μƒλ΅ μ¶”κ°€ν•κ³  λ³€κ²½ν•λ©΄ λμ–΄ λ³€κ²½μ μ μ—°ν•¨**μ„ μ–»κ² λλ‹¤.

μ¦‰, **μμ΅΄ μ—­μ „ μ›μΉ™(DIP)μ€ λ¦¬μ¤μ½”ν”„ μΉν™ μ›μΉ™(LSP)κ³Ό ν•¨κ» κ°λ°© νμ‡„ μ›μΉ™(OCP)μ„ λ”°λ¥΄λ” μ„¤κ³„λ¥Ό λ§λ“¤μ–΄ μ£Όλ” κΈ°λ°**μ΄ λλ‹¤.

<br>

# π“ μ†μ¤ μ½”λ“ μμ΅΄κ³Ό λ°νƒ€μ„ μμ΅΄

- **μμ΅΄ μ—­μ „ μ›μΉ™(DIP)μ€ μ†μ¤ μ½”λ“μ—μ„μ μμ΅΄μ„ μ—­μ „μ‹ν‚¤λ” μ›μΉ™μ΄λ‹¤.**

μ•”νΈν™” μμ μ—μ„ FlowController ν΄λμ¤κ°€ ByteSource μΈν„°νμ΄μ¤μ— μμ΅΄ν•κ³  μκ³ , ByteSourceμ κµ¬ν„μ²΄μΈ FileDataReader ν΄λμ¤λ„ ByteSource μΈν„°νμ΄μ¤μ— μμ΅΄ν•κ³  μλ‹¤κ³  ν•μ.

## μ†μ¤ μ½”λ“μ μμ΅΄

- λ‘ ν΄λμ¤ λ¨λ‘ κ³ μμ¤€ λ¨λ“μΈ ByteSource μΈν„°νμ΄μ¤μ— μμ΅΄ν•κ³  μλ‹¤.

<center><img src="/assets/images/solid/dip1.png"></center>

## λ°νƒ€μ„μ—μ„μ μμ΅΄

- κ³ μμ¤€ λ¨λ“μΈ FlowController ν΄λμ¤κ°€ μ €μμ¤€ λ¨λ“μΈ FileDataReader ν΄λμ¤μ— μμ΅΄ν•κ³  μλ‹¤.

<center><img src="/assets/images/solid/dip2.png"></center>

DIPλ” λ°νƒ€μ„μ μμ΅΄μ΄ μ•„λ‹ **μ†μ¤ μ½”λ“μ μμ΅΄μ„ μ—­μ „μ‹ν‚΄μΌλ΅μ¨ λ³€κ²½μ μ μ—°ν•¨μ„ ν™•λ³΄**ν•  μ μλ„λ΅ λ§λ“¤μ–΄ μ£Όλ” μ›μΉ™μ΄μ§€, **λ°νƒ€μ„μ—μ„μ μμ΅΄μ„ μ—­μ „μ‹ν‚¤λ” κ²ƒμ€ μ•„λ‹λ‹¤**.

<br>

# π“ DIPμ™€ ν¨ν‚¤μ§€

- **DIPλ” νƒ€μ…μ μ†μ λ„ μ—­μ „μ‹ν‚¨λ‹¤.**

DIPκ°€ μ μ©λκΈ° μ „ μ•”νΈν™” μμ λ” λ°μ΄ν„° μ½κΈ° νƒ€μ…μ€ FileDataReaderλ¥Ό μ†μ ν• ν¨ν‚¤μ§€κ°€ μ†μ ν•κ³  μμ—λ‹¤.

<center><img src="/assets/images/solid/dip3.png"></center>

DIPκ°€ μ μ©λκ³  λ°μ΄ν„° μ½κΈ° νƒ€μ…μ€ κ³ μμ¤€ λ¨λ“μ΄ μ†μ ν•κ² λλ‹¤.

<center><img src="/assets/images/solid/dip4.png"></center>

- νƒ€μ…μ μ†μ  μ—­μ „μ€ κ° ν¨ν‚¤μ§€λ¥Ό λ…λ¦½μ μΌλ΅ λ°°ν¬ν•  μ μλ„λ΅ λ§λ“¤μ–΄ μ¤€λ‹¤.
  - λ…λ¦½μ μΌλ΅ λ°°ν¬ν•λ‹¤λ” κ±΄ jar νμΌμ΄λ‚ DLL λ“±μ νμΌλ΅ λ°°ν¬ν•λ‹¤λ” κ²ƒμ„ λ»ν•¨

**μμ΅΄ μ—­μ „ μ›μΉ™(DIP)μ€ κ°λ°© νμ‡„ μ›μΉ™(OCP)μ„ ν΄λμ¤ μμ¤€λΏλ§ μ•„λ‹λΌ ν¨ν‚¤μ§€ μμ¤€κΉμ§€ ν™•μ¥μ‹μΌ μ£Όλ” λ””λ”¤λμ΄ λλ‹¤.**